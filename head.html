<!DOCTYPE html>
<html lang='en'>
    <head>
        <title>review your order</title>
        <meta charset='utf-8'>
<style>

html,body { background-color: #000; color: #d8d8d8; margin: 0; overflow: hidden; }
main { white-space: nowrap; height: 100vh; }
img { width: 100px; }
p { margin: 0; }
h2 { font-size: 13pt; text-align: center; }
div.items { display: inline-flex; flex-direction: column; vertical-align: top; padding-right: 10px; white-space: normal; height: 100vh; }
div.items > div { overflow-y: scroll; }
div.item { padding: 10px; width: 310px; position: relative; }
div.item:nth-of-type(2n) { background-color: #111; }
div.item:nth-of-type(2n+1) { background-color: #222; }
div.item.chosen { background-color: #040; }
div.item.active { background-color: #070; border: 2px solid red; padding: 8px; }
div.item > div { display: inline-block; vertical-align: middle; }
div.imgcont { width: 100px; text-align: center; }
div.namcont { width: 200px; margin-left: 10px; }
div.effcont { width: 310px; }
div.prev, div.feat { width: 15px; height: 15px; border-radius: 15px; position: absolute; right: 5px; top: 5px; }
div.item.active > div.prev, div.item.active > div.feat { right: 3px; top: 3px; }
div.prev { background-color: #0f0; }
div.feat { background-color: #f00; }
span.best { float: right; color: #0f0; background-color: #040; padding: 0 5px; }

</style>
<script>

window.addEventListener('load', function() {

    var active = document.querySelector('div.chosen'),
        activeIdx = 0,
        cols = document.querySelectorAll('div.items');
    active.classList.add('active');

    var updateActive = function() {
        active.classList.remove('active');
        active = cols[activeIdx].querySelector('.chosen');
        active.classList.add('active');
        document.body.scrollTo(active.offsetLeft + active.offsetWidth/2 - window.innerWidth/2, 0);
        vertScroll();
    };

    var tryMove = function(e) {
        if (e && e.classList.contains('item')) {
            active.classList.remove('active');
            active.classList.remove('chosen');
            active = e;
            active.classList.add('active');
            active.classList.add('chosen');
            vertScroll();
        }
    };

    var vertScroll = function() {
        var p = active.parentNode,
            pos = p.scrollTop,
            y = active.offsetTop - p.offsetTop;
        pos = Math.min(pos, y);
        pos = Math.max(pos, y - p.offsetHeight + active.offsetHeight);
        p.scrollTo(0, pos);
    };

    window.addEventListener('keydown', function(e) {
        switch (e.key) {
            case 'ArrowLeft':
            case 'h':
                if (activeIdx) updateActive(--activeIdx);
                break;
            case 'ArrowRight':
            case 'l':
                if (activeIdx < cols.length - 1) updateActive(++activeIdx);
                break;
            case 'ArrowUp':
            case 'k':
                tryMove(active.previousSibling);
                break;
            case 'ArrowDown':
            case 'j':
                tryMove(active.nextSibling);
                break;
            case 'PageUp':
            case 'g':
                tryMove(active.parentNode.firstChild);
                break;
            case 'PageDown':
            case 'G':
                tryMove(active.parentNode.lastChild);
                break;
            case 'Backspace':
            case 'Delete':
            case 'd':
            case 'x':
                // TODO tell the server to delet
                break;
            case 'Escape':
                // TODO e x p a n d the current item
                break;
            default: return;
        }
        e.preventDefault();
    });

});

</script>
    </head>
    <body>
        <main>
